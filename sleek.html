<!DOCTYPE html>
<html ng-app="sleek">
<head>
    <meta charset="utf-8">
    <title>SleekIRC</title>
    <link rel="stylesheet" href="./css/default.css" />

    <link rel="stylesheet" href="./libs/font-awesome-4.3.0/css/font-awesome.min.css" />

    <script type="text/javascript" src="./libs/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="./libs/angular.min.js"></script>
    <script type="text/javascript" src="./libs/angular-sanitize.js"></script>
    <script type="text/javascript" src="./libs/angular-ui-utils.min.js"></script>

    <script type="text/javascript" src="./libs/jquery.linkify.min.js"></script>
    <script type="text/javascript" src="./libs/localstoragedb.min.js"></script>


    <script type="text/javascript" src="./js/prototypes.js"></script>
    <script type="text/javascript" src="./js/ENUMS.js"></script>

    <script type="text/javascript" src="./js/Objects/Message.js"></script>
    <script type="text/javascript" src="./js/Objects/Chat.js"></script>
    <script type="text/javascript" src="./js/Objects/Channel.js"></script>
    <script type="text/javascript" src="./js/Objects/Private.js"></script>

    <script type="text/javascript" src="./js/Sleek.js"></script>
    <script type="text/javascript" src="./js/UI.js"></script>
</head>
<body>
    <div class="handleBar" handle-controller>
        <div class="close fa fa-times" ng-click="handle.close()"></div>
        <div class="maximize fa fa-square-o" ng-click="handle.maximize()"></div>
        <div class="minimize fa fa-minus" ng-click="handle.minimize()"></div>
    </div>
    <div class="programContainer" hud-controller chats-controller>
        <div class="hudController">
            <div class="hudHeader"></div>
            <div class="hudButton connection" ng-click="hud.setPanel('connection')" ng-class="{active: hud.isPanel('connection')}">
                <i class="fa fa-refresh"></i>
            </div>
            <div class="hudButton users" ng-click="hud.setPanel('users')" ng-class="{active: hud.isPanel('users')}">
                <i class="fa fa-users"></i>
            </div>
            <div class="hudButton">
                <i class="fa fa-square"></i>
            </div>
        </div>
        <div class="hudPanel" ng-class="{active: !hud.isPanel('noSelection')}">
            <div class="innerPanel connection" connection-controller ng-class="{active: hud.isPanel('connection')}">
                <div class="panelHeader">
                    <div class="title">Connection Details</div>
                </div>
                <div class="connectionForm">
                    <div class="field">
                        <div class="fieldTitle">
                            Freenode Status:
                            <span ng-show="connection.getServers()[0].status === connection.STATUS.CONNECTED">CONNECTED</span>

                            <span ng-show="connection.getServers()[0].status === connection.STATUS.NOTCONNECTED">NOT CONNECTED</span>
                        </div>
                    </div>

                    <div class="field">
                        <div class="fieldTitle">Username</div>
                        <input type="text" ng-model="userName" ng-change="connection.changeUsername(userName)" />
                    </div>
                    <div class="button" ng-click="connection.connect()">Connect</div>
                </div>
            </div>
            <div class="innerPanel users" ng-class="{active: hud.isPanel('users')}">
                <div class="panelHeader">
                    <div class="title">Users</div>
                </div>
                <div class="userlist" ng-class="{active: chat.isActive()}" ng-repeat="chat in chats.getChats()">
                    <div class="user" ng-repeat="user in chat.users">{{user}}</div>
                </div>
            </div>
        </div>

        <div class="mainContainer">
            <div class="chatSelection">
                <div class="chatButtons">
                    <div class="chatButton" ng-click="chat.focusChat()" ng-repeat="chat in chats.getChats()" ng-class="{active: chat.isActive()}">{{chat.name}}</div>
                </div>
                <div class="connectTo">
                    <div class="input"><input type="text" ng-model="newChatName" ui-keydown="{'enter':'chats.join(newChatName)'}" placeholder="Channel / User" autofocus /></div>
                    <div class="button" ng-click="chats.join(newChatName)">
                        <i class="fa fa-long-arrow-right"></i>
                    </div>
                </div>
            </div>
            <div class="chatsContainer">
                <div class="noChats" ng-class="{hidden: chats.getChats().length > 0}">No Chats!</div>
                <div class="chatWindow" ng-repeat="chat in chats.getChats()" ng-class="{active: chat.isActive()}">
                    <div class="chatHeader">
                        <div class="title">{{chat.name}}</div>
                        <div class="topic">{{chat.topic}}</div>
                    </div>
                    <div class="messageHistory">
                        <div class="message" ng-class="{self: message.senderSelf}" ng-repeat="message in chat.messages | orderBy:timestamp">
                            <div class="sender"><span class="time">[{{message.timestamp | date : 'HH:mm'}}] </span>{{message.sender}}: </div>
                            <div class="text" ng-bind-html="message.message | linkify"></div>
                        </div>
                        <div class="messageBox">
                            <div class="input"><input type="text" ng-model="SendMessage[chat.id]" ui-keydown="{'enter':'chat.sendMessage(SendMessage[chat.id])'}" ng-focus="chat.active" /></div>
                            <div class="button" ng-click="chat.sendMessage(SendMessage[chat.id])">Send</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
